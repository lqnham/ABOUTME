<!DOCTYPE html>
<html>
<head>

</head>
<body>   
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script>
    <script>
       var firebaseConfig = {
        apiKey: "AIzaSyCMIn_6E9SvE-ho6i8ykKjfRx46PBlIwxA",
        authDomain: "prostylee-9c568.firebaseapp.com",
        databaseURL: "https://prostylee-9c568.firebaseio.com",
        projectId: "prostylee-9c568",
        storageBucket: "prostylee-9c568.appspot.com",
        messagingSenderId: "626613618045",
        appId: "1:626613618045:web:121c56ae58eaf1745b7814",
        measurementId: "G-44W38FZLJT"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
       
       
        var provider = new firebase.auth.GoogleAuthProvider();
        //https://developers.google.com/identity/protocols/oauth2/scopes?authuser=1 reading scope s
        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
        provider.addScope('https://www.googleapis.com/auth/contacts');
        provider.addScope('https://www.googleapis.com/auth/cloud-platform');

        //firebase.auth().signInWithRedirect(provider); // refer use for mobile

        //show popup dang nhap
        // A FCM Token/Instance ID token identifies an installation of a specific app on a specific device. It does not identify a specific user.
        // An Auth ID token identifies a specific user of a specific app/project. It does not identify a specific device.
        // The two tokens are quite different and serve different purposes, and the Authentication Admin SDK correctly fails to verify the FCM token.
        firebase.auth().signInWithPopup(provider).then(function(result) {
            //FCM token(Instance token)
            var token = result.credential.accessToken; //You can use it to access the Google API. 
            var user = result.user;
            firebase.auth().currentUser.getIdToken(true).then(function(idToken) {
                // Auth ID token 
                console.log("this is token from Credential: "+ idToken);
                
            }).catch(function(error) {
                alert(error);
            });


        }).catch(function(error) {
            var errorCode = error.code;
            var errorMessage = error.message;c
            var email = error.email;
            var credential = error.credential;
        });
        //chuyen den trang dang nhap nhu new tab.
        // firebase.auth().getRedirectResult().then(function(result) {
        //     if (result.credential) {
        //         var token = result.credential.accessToken;
        //     }
    
        //     var user = result.user;
        //     }).catch(function(error) {
        //     var errorCode = error.code;
        //     var errorMessage = error.message;
        //     var email = error.email;
        //     var credential = error.credential;
        // });
    </script>
</body>
